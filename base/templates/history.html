{% extends 'main.html' %}
{% block content %}
<div class="content-wrapper fade-in">
    <div class="glass-container slide-up">
        <form method="GET" class="search-form">
            {% csrf_token %}
            <input type="text" name="q" placeholder="ğŸ” Search patients..." value="{{ search|default:'' }}" class="form-control">
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        <div class="btn-group">
            <a href="{% url 'home' %}" class="btn btn-primary">ğŸ  Home</a>
            <a href="{% url 'display' %}" class="btn btn-secondary">ğŸ“‹ Active Patients</a>
        </div>

        <div class="data-list">
            {% for i in data %}
            <div class="data-item">
                <h2>ğŸ‘¤ {{ i.name }}</h2>
                <p><strong>ğŸ‚ Age:</strong> {{ i.age }}</p>
                <p><strong>ğŸ©º Disease:</strong> {{ i.disease }}</p>
                <p><strong>ğŸ‘¨â€âš•ï¸ Doctor Assigned:</strong> {{ i.doctor_assigned }}</p>
                <p><strong>ğŸ¢ Room No:</strong> {{ i.room_number }}</p>
                
                {% if i.doc_image %}
                <div class="media-container">
                    <strong>ğŸ“· Image:</strong>
                    <img src="{{ i.patient_image.url }}" class="media-item" height="150" width="150" alt="{{ i.name }}">
                </div>
                {% endif %}
                
                <div class="action-buttons">
                    <a href="{% url 'restore' i.id %}" class="btn btn-success">ğŸ”„ Restore</a>
                    <a href="{% url 'display' %}" class="btn btn-secondary">ğŸ“‹ Back to Active</a>
                </div>
            </div>
            {% empty %}
            <div class="text-center">
                <h3>ğŸ“­ No deleted records found.</h3>
                <p>All patient records are currently active.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}