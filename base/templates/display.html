{% extends 'main.html' %}
{% block content %}
<div class="content-wrapper fade-in">
    <div class="glass-container slide-up">
        <form method="GET" class="search-form">
            {% csrf_token %}
            <input type="text" name="q" placeholder="ğŸ” Search patients..." value="{{ search|default:'' }}" class="form-control">
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        <div class="btn-group">
            <a href="{% url 'register' %}" class="btn btn-glow">â• Register New Patient</a>
            <a href="{% url 'history' %}" class="btn btn-secondary">ğŸ“œ View History</a>
        </div>

        <div class="data-list">
            {% for i in data %}
            <div class="data-item">
                <h2>ğŸ‘¤ {{ i.name }}</h2>
                <p><strong>ğŸ‚ Age:</strong> {{ i.age }}</p>
                <p><strong>ğŸ©º Disease:</strong> {{ i.disease }}</p>
                <p><strong>ğŸ‘¨â€âš•ï¸ Doctor Assigned:</strong> {{ i.doctor_assigned }}</p>
                <p><strong>ğŸ¢ Room No:</strong> {{ i.room_number }}</p>
                
                {% if i.patient_image %}
                <div class="media-container">
                    <strong>ğŸ“· Image:</strong>
                    <img src="{{ i.patient_image.url }}" class="media-item" height="150" width="150">
                </div>
                {% endif %}
                
                <div class="action-buttons">
                    <a href="{% url 'update' i.id %}" class="btn btn-warning">âœï¸ Edit</a>
                    <a href="{% url 'remove' i.id %}" class="btn btn-danger">ğŸ—‘ï¸ Delete</a>
                </div>
            </div>
            {% empty %}
            <div class="text-center">
                <h3>ğŸ“ No patient records found.</h3>
                <p>Start by registering a new patient.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}